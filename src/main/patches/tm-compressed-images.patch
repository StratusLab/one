diff --git a/src/vmm/LibVirtDriver.cc b/src/vmm/LibVirtDriver.cc
index c55468d..e579e10 100644
--- a/src/vmm/LibVirtDriver.cc
+++ b/src/vmm/LibVirtDriver.cc
@@ -143,7 +143,7 @@ int LibVirtDriver::deployment_description(
 
     if (emulator == "kvm")
     {
-        file << "\t\t<type>hvm</type>" << endl;
+        file << "\t\t<type machine='pc'>hvm</type>" << endl;
     }
 
     num = vm->get_template_attribute("OS",attrs);
diff --git a/src/tm_mad/tm_common.sh b/src/tm_mad/tm_common.sh
index 0f589fe..1e98122 100644
--- a/src/tm_mad/tm_common.sh
+++ b/src/tm_mad/tm_common.sh
@@ -145,3 +145,56 @@ function timeout_exec_and_log
         exit $CMD_CODE
     fi
 }
+ 
+function download_extract
+{
+    URL=$1
+    ARCHIVE=$2
+    FILENAME=$3
+    HOST=$4
+
+    if [ "x$HOST" != "x" ]; then
+        HOST="ssh $HOST"
+    fi
+
+    $HOST curl -k -o $ARCHIVE $URL
+
+    extract_tar $ARCHIVE $FILENAME
+
+    rm -rf $ARCHIVE
+}
+
+function file_ends_with
+{
+    FILE=$1
+    EXTENSION=$2
+
+    if [ "x$(echo $FILE | grep -E $EXTENSION)" != "x" ]; then
+        echo 0
+    else
+        echo 1
+    fi
+}
+
+function extract_tar
+{
+    ARCHIVE=$1
+    OUTPUT=$2
+
+    if [ $(file_ends_with $ARCHIVE '.tar.gz') = 0 ]; then
+        $FORMAT=z
+    elif [ $(file_ends_with $ARCHIVE '.tar.bz2') = 0 ]; then
+        $FORMAT=j
+    elif [ $(file_ends_with $ARCHIVE '.tar.xz') = 0 ]; then
+        $FORMAT=J
+    fi
+
+    TAR_CMD="tar -x${FORMAT}f $ARCHIVE"
+
+    if [ "x$OUTPUT" != "x" ]; then
+        $TAR_CMD -O > $OUTPUT
+    else
+        $TAR_CMD
+    fi
+}
+
diff --git a/src/tm_mad/nfs/tm_clone.sh b/src/tm_mad/nfs/tm_clone.sh
index ff2ed67..603128a 100755
--- a/src/tm_mad/nfs/tm_clone.sh
+++ b/src/tm_mad/nfs/tm_clone.sh
@@ -44,9 +44,24 @@ exec_and_log "mkdir -p $DST_DIR"
 exec_and_log "chmod a+w $DST_DIR"
 
 case $SRC in
-http://*)
+http*.tar.gz|http*.tgz)
+    log "Downloading tar.gz archive $SRC"
+    exec_and_log "download_extract $SRC $DST_PATH.tar.gz $DST_PATH"
+    ;;
+
+http*.bz2)
+    log "Downloading tar.bz2 archive $SRC"
+    exec_and_log "download_extract $SRC $DST_PATH.tar.bz2 $DST_PATH"
+    ;;
+
+http*.xz)
+    log "Downloading tar.xz archive $SRC"
+    exec_and_log "download_extract $SRC $DST_PATH.tar.xz $DST_PATH"
+    ;;
+
+http*)
     log "Downloading $SRC"
-    exec_and_log "wget -O $DST_PATH $SRC"
+    exec_and_log "curl -k -o $DST_PATH $SRC"
     ;;
 
 *)
diff --git a/src/tm_mad/ssh/tm_clone.sh b/src/tm_mad/ssh/tm_clone.sh
index b853119..1e2829d 100755
--- a/src/tm_mad/ssh/tm_clone.sh
+++ b/src/tm_mad/ssh/tm_clone.sh
@@ -43,9 +43,24 @@ log "Creating directory $DST_DIR"
 exec_and_log "ssh $DST_HOST mkdir -p $DST_DIR"
 
 case $SRC in
-http://*)
+http*.tar.gz|http*.tgz)
+    log "Downloading tar.gz archive $SRC"
+    exec_and_log "download_extract $SRC $DST_PATH.tar.gz $DST_PATH $DST_HOST"
+    ;;
+
+http*.bz2)
+    log "Downloading tar.bz2 archive $SRC"
+    exec_and_log "download_extract $SRC $DST_PATH.tar.bz2 $DST_PATH $DST_HOST"
+    ;;
+
+http*.xz)
+    log "Downloading tar.xz archive $SRC"
+    exec_and_log "download_extract $SRC $DST_PATH.tar.xz $DST_PATH $DST_HOST"
+    ;;
+
+http*)
     log "Downloading $SRC"
-    exec_and_log "ssh $DST_HOST wget -O $DST_PATH $SRC"
+    exec_and_log "curl -k -o $DST_PATH $SRC"
     ;;
 
 *)
